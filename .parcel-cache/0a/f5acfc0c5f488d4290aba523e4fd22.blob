function t(t){return t&&t.__esModule?t.default:t}var e,s={};e=s=function(t,e){var s=e.get(t);if(!s)throw new TypeError("attempted to get private field on non-instance");return s.get?s.get.call(t):s.value},s.default=e,s.__esModule=true;var o,a=t(s),i={};o=i=function(t,e,s){var o=e.get(t);if(!o)throw new TypeError("attempted to set private field on non-instance");if(o.set)o.set.call(t,s);else{if(!o.writable)throw new TypeError("attempted to set read only private field");o.value=s}return s},i.default=o,i.__esModule=true;var n,r=t(i),l={};n=l=function(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t},l.default=n,l.__esModule=true;var c=t(l),u=document.querySelector(".form"),d=document.querySelector(".workouts"),h=document.querySelector(".form__input--type"),p=document.querySelector(".form__input--distance"),_=document.querySelector(".form__input--duration"),v=document.querySelector(".form__input--cadence"),w=document.querySelector(".form__input--elevation"),k=document.querySelector(".workouts__deleteAll"),m=document.querySelector(".sort-by"),y=document.querySelector(".instructions");class g{constructor(t,e,s,o){c(this,"id",(Date.now()+"").slice(-7)),this.date=new Date(t),this.coords=e,this.distance=s,this.duration=o}description(){return"".concat(this.type[0].toUpperCase()).concat(this.type.slice(1)," on \n    ").concat(["January","February","March","April","May","June","July","August","September","October","November","December"][this.date.getMonth()]," ").concat(this.date.getDate(),", ").concat(this.date.getFullYear())}}class f extends g{constructor(t,e,s,o,a){super(t,e,s,o),c(this,"type","running"),this.cadence=a,this.calcPace(),this.description=this.description()}calcPace(){return this.pace=this.duration/this.distance,this.pace}}class b extends g{constructor(t,e,s,o,a){super(t,e,s,o),c(this,"type","cycling"),this.elevationGain=a,this.description=this.description(),this.calcSpeed()}calcSpeed(){return this.speed=this.distance/(this.duration/60),this.speed}}var S=new WeakMap,W=new WeakMap,M=new WeakMap,E=new WeakMap,O=new WeakMap;new class{constructor(){S.set(this,{writable:!0,value:void 0}),W.set(this,{writable:!0,value:void 0}),M.set(this,{writable:!0,value:[]}),E.set(this,{writable:!0,value:13}),O.set(this,{writable:!0,value:""}),c(this,"_checkExistingWorkoutDate",(function(){var t=new Date;return a(this,O)&&(t=a(this,O),r(this,O,"")),new Date(t)})),this._getPosition(),this._getLocalStorage(),this._checkExistingWorkouts(),u.addEventListener("submit",this._newWorkout.bind(this)),h.addEventListener("change",this._toggleElevationField),d.addEventListener("click",function(t){this._moveToPopUp(t),this._deleteWorkout(t),this._editWorkout(t)}.bind(this)),k.addEventListener("click",this._deleteAllWorkouts.bind(this)),m.addEventListener("change",this._sortBy.bind(this))}_getPosition(){navigator.geolocation.getCurrentPosition(this._loadMap.bind(this),(function(){alert("Location Not Enabled OR Found. Please refresh the page and ALLOW location to start using the app. Thank You")}))}_loadMap(t){var{latitude:e}=t.coords,{longitude:s}=t.coords,o=[e,s];r(this,S,L.map("map").setView(o,a(this,E))),r(this,W,L.marker(o)),L.tileLayer("http://{s}.tile.thunderforest.com/outdoors/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(a(this,S)),this._displayLocalStorageMapMarkers(),a(this,S).setView(o,a(this,E),{animate:!1}),a(this,S).on("click",this._showForm.bind(this))}_showForm(t){var{lat:e,lng:s}=t.latlng;a(this,W).isPopupOpen()||a(this,W).remove(),r(this,W,L.marker([e,s]).addTo(a(this,S))),y.classList.add("hide__instructions"),u.classList.remove("hidden"),h.focus()}_toggleElevationField(){v.closest(".form__row").classList.toggle("form__row--hidden"),w.closest(".form__row").classList.toggle("form__row--hidden")}_newWorkout(t){var e;t.preventDefault();var{lat:s,lng:o}=a(this,W).getLatLng(),i=[s,o],n=this._checkExistingWorkoutDate(),r=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];var o=e.every((t=>Number.isFinite(t))),a=e.every((t=>t>0));return o&&a},l=h.value,c=Number(p.value),u=Number(_.value);if("running"===l){var d=Number(v.value);if(!r(c,u,d))return alert("Please enter a value. \n  Values MUST be a positive number.");e=new f(n,i,c,u,d)}if("cycling"===l){var k=Number(w.value);if(!r(c,u)&&isNaN(k))return alert("Please enter a value. \n  Values MUST be a positive number.");e=new b(n,i,c,u,k)}a(this,M).push(e),this._renderWorkoutOnMap(e),this._renderWorkoutOnList(e),this._checkExistingWorkouts(),this._resetFields(),this._setLocalStorage()}_renderWorkoutOnMap(t){a(this,W).bindPopup(L.popup({maxWidth:250,minWidth:100,autoClose:!1,closeOnClick:!1,closeButton:!1,className:"".concat(t.type,"-popup")}).setContent("".concat("running"===t.type?"üèÉ‚Äç‚ôÇÔ∏è":"üö¥‚Äç"," ").concat(t.description))).openPopup()}_renderWorkoutOnList(t){var e,s,o='\n    <li class="workout workout--'.concat(t.type,'" data-id="').concat(t.id,'">\n      <h2 class="workout__title">').concat(t.description,'</h2>\n      <span class="workout__edit"><i class="fas fa-edit"></i></span>\n      <span class="workout__delete"><i class="far fa-trash-alt"></i></span>\n      <div class="workout__details">\n        <span class="workout__icon">').concat("running"===t.type?"üèÉ‚Äç‚ôÇÔ∏è":"üö¥‚Äç",'</span>\n        <span class="workout__value">').concat(t.distance,'</span>\n        <span class="workout__unit">km</span>\n      </div>\n      <div class="workout__details">\n        <span class="workout__icon">‚è±</span>\n        <span class="workout__value">').concat(t.duration,'</span>\n        <span class="workout__unit">min</span>\n      </div>');"running"===t.type&&(o+='\n        <div class="workout__details">\n        <span class="workout__icon">‚ö°Ô∏è</span>\n        <span class="workout__value">'.concat(null===(e=t.pace)||void 0===e?void 0:e.toFixed(1),'</span>\n        <span class="workout__unit">min/km</span>\n      </div>\n      <div class="workout__details">\n        <span class="workout__icon">ü¶∂üèº</span>\n        <span class="workout__value">').concat(t.cadence,'</span>\n        <span class="workout__unit">spm</span>\n      </div>\n    </li>'));"cycling"===t.type&&(o+='\n        <div class="workout__details">\n        <span class="workout__icon">‚ö°Ô∏è</span>\n        <span class="workout__value">'.concat(null===(s=t.speed)||void 0===s?void 0:s.toFixed(1),'</span>\n        <span class="workout__unit">km/h</span>\n      </div>\n      <div class="workout__details">\n        <span class="workout__icon">‚õ∞</span>\n        <span class="workout__value">').concat(t.elevationGain,'</span>\n        <span class="workout__unit">m</span>\n      </div>\n    </li>'));u.insertAdjacentHTML("afterend",o)}_moveToPopUp(t){if(t.target.closest(".workout")){var e=t.target.closest(".workout").dataset.id,s=a(this,M).find((t=>t.id===e));a(this,S).setView(s.coords,a(this,E),{animate:!0,duration:1})}}_resetFields(){v.value=p.value=_.value=w.value="",p.blur(),v.blur(),_.blur(),w.blur(),u.style.display="none",u.classList.add("hidden"),setTimeout((()=>u.style.display="grid"),1e3)}_setLocalStorage(){localStorage.setItem("workouts",JSON.stringify(a(this,M)))}_displayLocalStorageMapMarkers(){if(!a(this,M).length>1)return console.log("No workouts found in local storage");a(this,M).forEach((t=>{r(this,W,L.marker(t.coords).addTo(a(this,S))),this._renderWorkoutOnMap(t)}))}_populateForm(t){h.value=t.type,p.value=t.distance,_.value=t.duration,r(this,W,L.marker(t.coords).addTo(a(this,S))),"running"===t.type&&(v.value=t.cadence,v.closest(".form__row").classList.remove("form__row--hidden"),w.closest(".form__row").classList.add("form__row--hidden")),"cycling"===t.type&&(w.value=t.elevationGain,w.closest(".form__row").classList.remove("form__row--hidden"),v.closest(".form__row").classList.add("form__row--hidden")),p.focus()}_editWorkout(t){if(t.target.closest(".workout__edit")){var e=t.target.closest(".workout"),s=e.dataset.id,o=a(this,M).find((t=>t.id===s));r(this,O,o.date),e.style.display="none",u.classList.remove("hidden"),y.classList.add("hide__instructions"),setTimeout((()=>u.style.display="grid"),1e3),this._populateForm(o),a(this,M).splice(a(this,M).indexOf(o),1)}}_getLocalStorage(){var t=JSON.parse(localStorage.getItem("workouts"));t&&(r(this,M,t),a(this,M).forEach((t=>this._renderWorkoutOnList(t))))}_deleteWorkout(t){if(t.target.closest(".workout__delete")){var e=t.target.closest(".workout");e.style.display="none";var s=e.dataset.id,o=a(this,M).find((t=>t.id===s));a(this,M).splice(a(this,M).indexOf(o),1),a(this,S).eachLayer((function(t){t.options.attribution||t.remove()})),this._displayLocalStorageMapMarkers(),this._setLocalStorage(),this._checkExistingWorkouts()}}_deleteAllWorkouts(t){this.reset()}_checkExistingWorkouts(){a(this,M).length<1?(k.style.display="none",m.style.display="none"):(k.style.display="flex",m.style.display="flex")}_sortByData(t){var e=a(this,M).sort(((e,s)=>e[t]-s[t]));document.querySelectorAll(".workout").forEach((t=>t.style.display="none")),e.forEach((t=>this._renderWorkoutOnList(t)))}_sortByDate(){var t=a(this,M).sort(((t,e)=>new Date(e.date)-new Date(t.date)));document.querySelectorAll(".workout").forEach((t=>t.style.display="none")),t.forEach((t=>this._renderWorkoutOnList(t)))}_sortBy(){"distance"===m.value&&this._sortByData("distance"),"duration"===m.value&&this._sortByData("duration"),"date"===m.value&&this._sortByDate()}reset(){localStorage.removeItem("workouts"),location.reload()}};
//# sourceMappingURL=index.HASH_REF_d6008f08fe7be6eba8af99534865bf20.js.map
